$(document).ready(function(){$("#search").on("submit",function(a){a=$.trim($("#q").val()).toLowerCase();$("#q").val(a);if(1>a.length||a==$("#q").prop("defaultValue"))return $("#q").focus(),!1})});var stats_action={};function stats(a,c,b){b=b?b:1;stats_action[a]!=b&&(stats_action[a]=b,c={action:a,pid:c,status:b},"v"==a&&document.referrer&&(c.ref=document.referrer),$.ajax({url:"/stats.php",type:"POST",data:c}))}function findInFav(a){var c=localStorage.getItem("myfav");if(c&&c.length)try{c=JSON.parse(c)}catch(b){return}"object"!=$.type(c)&&(c={});return c[a]?1:0}function printImage(a,c){stats("p",c);window.print();}function initPic(){$(".col-view i").on("click",function(){if(!$(this).hasClass("active")){var a=$(this).data("idx");$(".gallery").removeClass("gallery-small gallery-big");a&&$(".gallery").addClass("gallery-"+a);$(".col-view i").removeClass("active");$(this).addClass("active")}});$(".gallery .thumbs").each(function(a){$(this).data("idx",a)});$(".col-sort").on("click","i",function(){if(!$(this).hasClass("disable")){var a=$(this).data("sortby");if("idx"!=a||!$(this).hasClass("active")){$(".col-sort i").removeClass("active");$(this).addClass("active");"idx"!=a&&$(this).toggleClass("js-asc");var c=[];$(".gallery .thumbs").each(function(b){$(this).after('<i id="sp'+b+'"></i>');c.push([$(this).data(a),$(this)])});c.sort(function(a,c){return a[0]-c[0]});$(this).hasClass("js-asc")&&c.reverse();for(var b=0;b<c.length;b++)$("#sp"+b).replaceWith(c[b][1])}}})}function initFav(){var a=localStorage.getItem("myfav");if(a&&a.length)try{a=JSON.parse(a)}catch(b){return}if("object"==$.type(a)){$(".gallery").empty();for(var c in a)$(".gallery").append('<a href="/coloring/'+c+'" class="thumbs"><div class="img-wrap"><img alt="" src="'+a[c]+'" width="142"></div><i class="hover"></i></a>')}}function initImg(a){setTimeout(function(){stats("v",a)},1E3);$("#addtofavorite").on("click",function(){var a=$(this).data("pid"),b=localStorage.getItem("myfav");if(b&&b.length)try{b=JSON.parse(b)}catch(d){return}"object"!=$.type(b)&&(b={});b[a]?(stats("f",a,-1),delete b[a],$(this).removeClass("green"),$(this).find("span").text("Add To Favorites")):(stats("f",a,1),b[a]=$(this).data("img"),$(this).addClass("green"),$(this).find("span").text("Favorite"));a=JSON.stringify(b);try{localStorage.setItem("myfav",a)}catch(d){}});findInFav(a)&&($("#addtofavorite").addClass("green"),$("#addtofavorite span").text("Favorite"))}function init(a,c){"fav"==a?initFav():"pic"==a?initPic():"img"==a&&initImg(c)}function myga(a,c,b,d,e){c=location.href.replace(/(.*)\/([0-9]+)\/?$/,"$2");stats("send"==a?"social":a,c||0,d)}function load_data_share(){var a=document.querySelector("meta[property='og:url']"),c=document.querySelector("meta[property='og:image']"),b=document.querySelector("meta[name='twitter:title']"),d=document.querySelector("meta[property='og:description']"),e=document.location.protocol+"//"+document.location.host+document.location.pathname+(document.location.search?document.location.search:"");return{url:a?a.content:e,image:c?c.content:"",title:b?b.content:document.title,desc:d?d.content:document.title}}function fbpopup(){var a="https://www.facebook.com/sharer.php?u="+load_data_share().url;window.open(a,"fbshare","height=380,width=660,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0");myga("send","event","Social","Facebook","Share")}function rdpopup(){var a=load_data_share();window.open("https://reddit.com/submit?url="+a.url+"&amp;title="+a.title,"rdshare","height=270,width=630,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0");myga("send","event","Social","Reddit","Share")}function emailgo(){var a=load_data_share();window.location.href="mailto:?Subject="+a.title+"&Body=You%20can%20print%20or%20download%20this%20coloring%20page!%0D%0A"+a.url;myga("send","event","Social","Email","Share")};